# 26.06.2014
ALTER TABLE  `teams` ADD  `server` ENUM(  'euw',  'eune',  '' ) NULL AFTER  `game` , ADD INDEX (  `server` );
UPDATE `teams` SET `server` = "euw" WHERE `game` = "lol";
ALTER TABLE  `tournaments` ADD  `server` ENUM(  'euw',  'eune',  '' ) NULL AFTER  `game` , ADD INDEX (  `server` );
UPDATE `tournaments` SET `server` = "euw" WHERE `game` = "lol";

UPDATE `tm_settings` SET  `setting` =  'lol-current-number-euw' WHERE  `tm_settings`.`setting` =  'lol-current-number';
UPDATE `tm_settings` SET  `setting` =  'tournament-reg-lol-euw' WHERE  `tm_settings`.`setting` =  'tournament-reg-lol';
UPDATE `tm_settings` SET  `setting` =  'tournament-start-lol-euw' WHERE  `tm_settings`.`setting` =  'tournament-start-lol';
UPDATE `tm_settings` SET  `field` =  'Номер турнира (League of Legends - EUW)' WHERE  `tm_settings`.`setting` =  'lol-current-number-euw';
UPDATE `tm_settings` SET  `field` =  'Регистрация на турнир (LoL - EUW)' WHERE  `tm_settings`.`setting` =  'tournament-reg-lol-euw';
UPDATE `tm_settings` SET  `field` =  'Старт турнира (League of Legends - EUW)' WHERE  `tm_settings`.`setting` =  'tournament-start-lol-euw';
INSERT INTO `tm_settings` (`setting`, `value`, `field`, `type`, `position`) VALUES ('lol-current-number-eune', '1', 'Номер турнира (League of Legends - EUNE)', 'text', '3'), ('tournament-reg-lol-eune', '0', 'Регистрация на турнир (LoL - EUNE)', 'checkbox', '3');
INSERT INTO `tm_settings` (`setting`, `value`, `field`, `type`, `position`) VALUES ('tournament-start-lol-eune', '0', 'Старт турнира (League of Legends - EUNE)', 'checkbox', '3');
ALTER TABLE  `notifications` CHANGE  `delivered`  `delivered` TINYINT( 2 ) UNSIGNED NOT NULL;

# 14.06.2014
CREATE TABLE `riot_callback` (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`callback` TEXT NOT NULL ,
`timestamp` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE = INNODB;
ALTER TABLE  `riot_callback` ADD  `game_id` BIGINT UNSIGNED NOT NULL AFTER  `id`;
ALTER TABLE  `riot_callback` ADD  `status` ENUM(  'received',  'processed' ) NOT NULL DEFAULT  'received';

# 10.06.2014 - cms update
ALTER TABLE  `tm_admins` CHANGE  `language`  `language` CHAR( 2 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT  'en'

# 04.06.2014
INSERT INTO `tm_modules` (`name` ,`level` ,`added_timestamp`) VALUES ('emails',  '3', CURRENT_TIMESTAMP);

# 03.06.2014
CREATE TABLE `notifications` (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`game` ENUM('lol', 'hs') NOT NULL ,
`tournament_id` INT UNSIGNED NOT NULL ,
`delivered` TINYINT( 1 ) UNSIGNED NOT NULL ,
INDEX (  `game` ,  `tournament_id` )
) ENGINE = INNODB;
ALTER TABLE  `notifications` CHANGE  `tournament_id`  `tournament_name` VARCHAR( 50 ) NOT NULL;

# 29.05.2014
ALTER TABLE  `tournaments` ADD  `time` VARCHAR( 20 ) NULL AFTER  `dates`;
ALTER TABLE  `tournaments` CHANGE  `status`  `status` ENUM(  'Ended',  'Registration',  'Live',  'On hold', 'Start' ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;

# 28.05.2014 - cms update
ALTER TABLE  `tm_settings` ADD  `field` VARCHAR( 99 ) NULL ,
ADD  `type` ENUM(  'text',  'checkbox', 'level' ) NOT NULL DEFAULT  'text',
ADD  `position` TINYINT( 3 ) UNSIGNED NOT NULL DEFAULT  '0';

# 23.05.2014
RENAME TABLE `hs_fights` TO `fights`;
RENAME TABLE `lol_fights` TO `lol_games`;
ALTER TABLE `fights` CHANGE `challonge_tournament_id` `match_id` BIGINT( 20 ) UNSIGNED NOT NULL;
DELETE FROM `options` WHERE `options`.`id` =1;
DELETE FROM `options` WHERE `options`.`id` =4;
DELETE FROM `options` WHERE `options`.`id` =5;
DELETE FROM `options` WHERE `options`.`id` =6;
DELETE FROM `options` WHERE `options`.`id` =7;
DELETE FROM `options` WHERE `options`.`id` =9;
DELETE FROM `options` WHERE `options`.`id` =10;
DELETE FROM `options` WHERE `options`.`id` =11;
DELETE FROM `options` WHERE `options`.`id` =14;
DELETE FROM `options` WHERE `options`.`id` =15;
DELETE FROM `options` WHERE `options`.`id` =16;
DELETE FROM `options` WHERE `options`.`id` =17;
INSERT INTO `tm_modules` (`name` ,`level` ,`added_timestamp`) VALUES ('tournaments',  '1', CURRENT_TIMESTAMP);

# 22.05.2014
DROP TABLE `notifications`;
CREATE TABLE  `subscribe` (
`id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY ,
`email` VARCHAR( 99 ) NOT NULL ,
`unsublink` VARCHAR( 99 ) NOT NULL ,
INDEX (  `email` )
) ENGINE = INNODB;
ALTER TABLE  `subscribe` CHANGE  `unsublink`  `unsublink` VARCHAR( 200 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;

# 19.05.2014
ALTER TABLE `players` DROP `approved`;
ALTER TABLE `players` DROP `deleted`;

# 16.05.2014
ALTER TABLE  `news` ADD  `views` INT UNSIGNED NOT NULL DEFAULT  '0';

# 13.05.2014
ALTER TABLE  `teams` ADD  `ended` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT  '0';

# 08.05.2014
ALTER TABLE  `teams` ADD  `place` TINYINT( 1 ) UNSIGNED NOT NULL DEFAULT  '0';
ALTER TABLE  `teams` ADD INDEX (  `game` );

--
-- Table structure for table `contact_form_timeout`
--

CREATE TABLE IF NOT EXISTS `contact_form_timeout` (
  `ip` varchar(20) NOT NULL,
  `timestamp` int(10) unsigned NOT NULL,
  KEY `ip` (`ip`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Table structure for table `news`
--

CREATE TABLE IF NOT EXISTS `news` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `admin_id` int(10) unsigned NOT NULL DEFAULT '0',
  `title` varchar(255) NOT NULL,
  `able` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `short_english` text,
  `english` text,
  `extension` varchar(3) DEFAULT NULL,
  `added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `comments` int(10) unsigned NOT NULL DEFAULT '0',
  `likes` int(10) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `admin_id` (`admin_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Table structure for table `news_likes`
--

CREATE TABLE IF NOT EXISTS `news_likes` (
  `news_id` int(10) unsigned NOT NULL,
  `ip` varchar(20) NOT NULL,
  KEY `ip` (`ip`),
  KEY `index` (`news_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;